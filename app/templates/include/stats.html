{% load home_tags %}
{% load tz %}
{% if not stats %}
    <p class="lead">Stats will show up here after files are uploaded and stats are generated...</p>
{% else %}
    <div class="row">
        {% include 'include/stats-card.html' with title="Total Files" data=stats.stats.count %}
        {% include 'include/stats-card.html' with title="Total Size" data=stats.stats.human_size %}
        {% include 'include/stats-card.html' with title="Total Bytes" data=stats.stats.size %}
    </div>

    <table class="table table-sm table-striped table-hover">
        <thead>
        <tr>
            <th scope="col">Type</th>
            <th scope="col">Count</th>
            <th scope="col">Size</th>
            <th scope="col" class="d-none d-sm-table-cell">Bytes</th>
        </tr>
        </thead>
        <tbody>
        {% for type, data in stats.stats.types.items %}
        <tr>
            <th scope="row">{{ type }}</th>
            <td>{{ data.count }}</td>
            <td>{{ data.size|bytes_human }}</td>
            <td class="d-none d-sm-table-cell">{{ data.size }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    <p><a class="btn btn-sm btn-outline-light" role="button" id="update-stats-btn"
          data-target-url="{% url 'home:update-stats' %}">
        <i class="fa-solid fa-chart-bar"></i> Process Stats</a>{% if stats %}
        Updated: {{ stats.created_at|localtime }}{% endif %}</p>
{% endif %}
